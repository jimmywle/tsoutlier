install.packages("devtools")
library("devtools")
devtools::install_github("klutometis/roxygen")
install.packages("roxygen2")
library(roxygen2)
library(tsoutlier)
algorithm('[
{"ga:date":"2017-05-21", "ga:users": 256},
{"ga:date":"2017-05-24", "ga:users" : 15656.23},
{"ga:date":"2017-05-22", "ga:users" : 1256},
{"ga:date":"2017-05-23", "ga:users" : 1056.62},
{"ga:date":"2017-05-26", "ga:users" : 166.87},
{"ga:date":"2017-05-25", "ga:users" : 256.10}
]')
?fromJson
library(tsoutlier)
algorithm('[
{"ga:date":"2017-05-21", "ga:users": 256},
{"ga:date":"2017-05-24", "ga:users" : 15656.23},
{"ga:date":"2017-05-22", "ga:users" : 1256},
{"ga:date":"2017-05-23", "ga:users" : 1056.62},
{"ga:date":"2017-05-26", "ga:users" : 166.87},
{"ga:date":"2017-05-25", "ga:users" : 256.10}
]')
library(tsoutlier)
library(tsoutlier)
library(devtools)
install_github("kartikeyakirar/tsoutlier")
?install.packages
?install_github
install_github("kartikeyakirar/tsoutlier")
install_github("kartikeyakirar/tsoutlier",force=T)
install_github("tsoutlier","kartikeyakirar")
library(tsoutlier)
install_github("tsoutlier","kartikeyakirar")
tsoutlier::algorithm('[{"ga:date":"2017-05-21", "ga:users": 256},  {"ga:date":"2017-05-24", "ga:users" : 15656.23},  {"ga:date":"2017-05-22", "ga:users" : 1256},{"ga:date":"2017-05-23", "ga:users" : 1056.62},{"ga:date":"2017-05-26", "ga:users" : 166.87},  {"ga:date":"2017-05-25", "ga:users" : 256.10} ]
')
backports   devtools   jsonlite      praise         sandwich     tsoutlier
BH          dichromat  KFKSDS        quadprog       scales       tsoutliers
bitops      expsmooth  labeling      quantmod       strucchange  TTR
caTools     forecast   latticeExtra  RColorBrewer   stsm         xts
chron       fracdiff   lazyeval      RcppArmadillo  testthat     zoo
coda        fts        lmtest        reshape2       timeDate
colorspace  ggplot2    mondate       rmarkdown      timeSeries
crayon      gtable     munsell       rprojroot      tis
DAAG        htmltools  plyr          rticles        tseries
c("acepack ","feather"," kernlab"," nnet","RSQLite","timeDate","assertthat"," forecast"," KernSmooth ","opencpu","rstudioapi","tools","
base","  foreign","  knitr","   openssl","RUnit","  translations","
base64enc   Formula","  lattice"," pander"," R.utils","tseries","
boot","  fracdiff"," longmemo","parallel     scales"," tsoutlier","
brew","  ggplot2","  magrittr","plogr","  sendmailR ","   tsoutliers","
checkmate   ggplot2movies  mapproj"," protolite    shiny","  TTR","
class"," git2r","    maps","    quadprog ","    shinyjs","unix","
cluster     graphics"," maptools","quantmod    "," sourcetools "," urca","
codetools   grDevices","markdown","quantreg     sp","     utils","
colorspace  grid","     MASS","    R6","     SparseM","vcd","
compiler    gridExtra","Matrix","  RAppArmor    spatial","viridis","
covr","  gtable","   MatrixModels  rappdirs     splines","viridisLite","
curl","  hexbin","   memoise"," R.cache","stats","  webutils","
datasets    highr","    methods"," Rcpp","   stats4"," whisker","
data.table  Hmisc","    mgcv","    rex","    stringi","withr","
date","  hms","","mime","    rlang","  stringr","XML","
DBI","   htmlTable","miniUI","  R.methodsS3  ","survival   ","  xtable","
devtools    htmlwidgets    multcomp","RMySQL"," sys","    xts","
digest","httpuv","   munsell"," R.oo","   tcltk","  yaml","
downloader  httr","     mvtnorm"," rpart","  TH.data","zip","
evaluate    jsonlite"," nlme","    R.rsp","  tibble"," zoo","
backports   devtools   jsonlite","praise","   sandwich   ","  tsoutlier","
BH","    dichromat  KFKSDS","  quadprog"," scales"," tsoutliers","
bitops","expsmooth  labeling","quantmod"," strucchange "," TTR","
caTools     forecast   latticeExtra  RColorBrewer   stsm","   xts","
chron"," fracdiff   lazyeval","RcppArmadillo  testthat  ","   zoo","
coda","  fts","  lmtest","  reshape2"," timeDate","
colorspace  ggplot2    mondate"," rmarkdown","timeSeries","
crayon","gtable     munsell"," rprojroot","tis","
DAAG","  htmltools  plyr","    rticles","  tseries")
gsub(" ","".)
lk<-c("acepack ","feather"," kernlab"," nnet","RSQLite","timeDate","assertthat"," forecast"," KernSmooth ","opencpu","rstudioapi","tools","
base","  foreign","  knitr","   openssl","RUnit","  translations","
base64enc   Formula","  lattice"," pander"," R.utils","tseries","
boot","  fracdiff"," longmemo","parallel     scales"," tsoutlier","
brew","  ggplot2","  magrittr","plogr","  sendmailR ","   tsoutliers","
checkmate   ggplot2movies  mapproj"," protolite    shiny","  TTR","
class"," git2r","    maps","    quadprog ","    shinyjs","unix","
cluster     graphics"," maptools","quantmod    "," sourcetools "," urca","
codetools   grDevices","markdown","quantreg     sp","     utils","
colorspace  grid","     MASS","    R6","     SparseM","vcd","
compiler    gridExtra","Matrix","  RAppArmor    spatial","viridis","
covr","  gtable","   MatrixModels  rappdirs     splines","viridisLite","
curl","  hexbin","   memoise"," R.cache","stats","  webutils","
datasets    highr","    methods"," Rcpp","   stats4"," whisker","
data.table  Hmisc","    mgcv","    rex","    stringi","withr","
date","  hms","","mime","    rlang","  stringr","XML","
DBI","   htmlTable","miniUI","  R.methodsS3  ","survival   ","  xtable","
devtools    htmlwidgets    multcomp","RMySQL"," sys","    xts","
digest","httpuv","   munsell"," R.oo","   tcltk","  yaml","
downloader  httr","     mvtnorm"," rpart","  TH.data","zip","
evaluate    jsonlite"," nlme","    R.rsp","  tibble"," zoo","
backports   devtools   jsonlite","praise","   sandwich   ","  tsoutlier","
BH","    dichromat  KFKSDS","  quadprog"," scales"," tsoutliers","
bitops","expsmooth  labeling","quantmod"," strucchange "," TTR","
caTools     forecast   latticeExtra  RColorBrewer   stsm","   xts","
chron"," fracdiff   lazyeval","RcppArmadillo  testthat  ","   zoo","
coda","  fts","  lmtest","  reshape2"," timeDate","
colorspace  ggplot2    mondate"," rmarkdown","timeSeries","
crayon","gtable     munsell"," rprojroot","tis","
DAAG","  htmltools  plyr","    rticles","  tseries")
gsub(" ","".lk)
gsub(" ","",lk)
lk<-c(
"acepack ","feather"," kernlab"," nnet","RSQLite","timeDate","assertthat"," forecast"," KernSmooth ","opencpu","rstudioapi","tools","
base","  foreign","  knitr","   openssl","RUnit","  translations","
base64enc ","   Formula","  lattice"," pander"," R.utils","tseries","
boot","  fracdiff"," longmemo","parallel  ","    scales"," tsoutlier","
brew","  ggplot2","  magrittr","plogr","  sendmailR ","   tsoutliers","
checkmate ","   ggplot2movies","   mapproj"," protolite ","    shiny","  TTR","
class"," git2r","    maps","    quadprog ","    shinyjs","unix","
cluster   ","   graphics"," maptools","quantmod    "," sourcetools "," urca","
codetools ","   grDevices","markdown","quantreg    ","  sp","     utils","
colorspace ","  grid","     MASS","    R6","     SparseM","vcd","
compiler ","    gridExtra","Matrix","  RAppArmor    "," spatial","viridis","
covr","  gtable","   MatrixModels  "," rappdirs ","     splines","viridisLite","
curl","  hexbin","   memoise"," R.cache","stats","  webutils","
datasets  ","   highr","    methods"," Rcpp","   stats4"," whisker","
data.table  "," Hmisc","    mgcv","    rex","    stringi","withr","
date","  hms","mime","    rlang","  stringr","XML","
DBI","   htmlTable","miniUI","  R.methodsS3  ","survival   ","  xtable","
devtools    "," htmlwidgets ","    multcomp","RMySQL"," sys","    xts","
digest","httpuv","   munsell"," R.oo","   tcltk","  yaml","
downloader ","  httr","     mvtnorm"," rpart","  TH.data","zip","
evaluate ","    jsonlite"," nlme","    R.rsp","  tibble"," zoo","
backports","    devtools  ","  jsonlite","praise","   sandwich   ","  tsoutlier","
BH","    dichromat ","  KFKSDS","  quadprog"," scales"," tsoutliers","
bitops","expsmooth  "," labeling","quantmod"," strucchange "," TTR","
caTools    ","  forecast ","   latticeExtra  "," RColorBrewer  ","  stsm","   xts","
chron"," fracdiff  ","  lazyeval","RcppArmadillo  "," testthat  ","   zoo","
coda","  fts","  lmtest","  reshape2"," timeDate","
colorspace ","  ggplot2 ","    mondate"," rmarkdown","timeSeries","
crayon","gtable  ","    munsell"," rprojroot","tis","
DAAG","  htmltools ","  plyr","    rticles","  tseries")
lk
lk<-gsub(" ","",lk)
lk
lk<-gsub("\n","",lk)
lk
?seq
jsonlite::fromJSON('[{"ga:date":2017-05-21, "ga:users": 256},
{"ga:date":2017-05-24, "ga:users" : 15656.23},
{"ga:date":2017-05-22, "ga:users" : 1256},
{"ga:date":2017-05-23, "ga:users" : 1056.62},
{"ga:date":2017-05-26, "ga:users" : 166.87},
{"ga:date":2017-05-25, "ga:users" : 256.10} ]')
jsonlite::fromJSON('[{"ga:date":"2017-05-21", "ga:users": 256},
{"ga:date":"2017-05-24", "ga:users" : 15656.23},
{"ga:date":"2017-05-22", "ga:users" : 1256},
{"ga:date":"2017-05-23", "ga:users" : 1056.62},
{"ga:date":"2017-05-26", "ga:users" : 166.87},
{"ga:date":"2017-05-25", "ga:users" : 256.10} ]')
library(tsoutlier)
jsonlite::fromJSON('[{"ga:date":"2017-05-21", "ga:users": 256},
{"ga:date":"2017-05-24", "ga:users" : 15656.23},
{"ga:date":"2017-05-22", "ga:users" : 1256},
{"ga:date":"2017-05-23", "ga:users" : 1056.62},
{"ga:date":"2017-05-26", "ga:users" : 166.87},
{"ga:date":"2017-05-25", "ga:users" : 256.10} ]')
kl<-jsonlite::fromJSON('[{"ga:date":"2017-05-21", "ga:users": 256},
{"ga:date":"2017-05-24", "ga:users" : 15656.23},
{"ga:date":"2017-05-22", "ga:users" : 1256},
{"ga:date":"2017-05-23", "ga:users" : 1056.62},
{"ga:date":"2017-05-26", "ga:users" : 166.87},
{"ga:date":"2017-05-25", "ga:users" : 256.10} ]')
tsoutlier::algorithm(kl)
with_libpaths(new = "/usr/lib/R/library/", install_github("kartikeyakirar/tsoutlier"))
install_github("tsoutlier","kartikeyakirar")
tsoutlier::algorithm(kl)
library(tsoutlier)
tsoutlier::algorithm(kl)
kl
dat<-kl
options(warn=-1)
ipak <- function(pkg){
install.packages(new.pkg, dependencies = TRUE,lib = "/usr/lib/R/library")
sapply(pkg, require, character.only = TRUE)
}
packages <- c("forecast", "zoo","tsoutliers","jsonlite")
ipak(packages)
setwd("/Users/kartikeya kirar/Downloads/jimmy/")
source("outlier_detection.R")
source("timeseries.R")
source("timeseries_conversion.R")
jsonlite::toJSON('[{"date":"2017-05-21","users":256},
{"date":"2017-05-24","users":15656.23},
{"date":"2017-05-22","users":1256},
{"date":"2017-05-23","users":1056.62},
{"date":"2017-05-26","users":166.87},
{"date":"2017-05-25","users":256.10}]')
jsonlite::fromJSON('[{"date":"2017-05-21","users":256},
{"date":"2017-05-24","users":15656.23},
{"date":"2017-05-22","users":1256},
{"date":"2017-05-23","users":1056.62},
{"date":"2017-05-26","users":166.87},
{"date":"2017-05-25","users":256.10}]')
asd<-jsonlite::fromJSON('[{"date":"2017-05-21","users":256},
{"date":"2017-05-24","users":15656.23},
{"date":"2017-05-22","users":1256},
{"date":"2017-05-23","users":1056.62},
{"date":"2017-05-26","users":166.87},
{"date":"2017-05-25","users":256.10}]')
asd$date
nchar(asd$date[1])
nchar(asd[,1][1])
algorithm <- function(input){
options(warn=-1)
# dat<-fromJSON(input)
dat<-input
if(nchar(dat[,1][1])>10){
seq_len<-nrow(dat)
input[,1]<-seq(as.Date("2000/1/1"), by = "day", length.out = seq_len)
}else {
dat[,1]<-as.Date(as.character(dat[,1]), format='%Y-%m-%d')
dat<-dat[order(dat[,1]),]
}
t_c<- timeseries_conversion(input[,2], order.by=input[,1])
tsm<-timeseries(t_c)
indx <- 1:length(dat[,1])
var.use <- dat[,2]
lo <- loess(var.use~indx)
predicted<-predict(lo)
temp<-var.use
analysis<-outlier_detection(tsm,maxit.iloop = 1)
if(nrow(analysis)==0){
diff<-abs(predicted-var.use)
per_diff<-diff/predicted *100
per_limt<-min(per_diff[analysis$ind])
limit<-max(per_diff[- analysis$ind])
limit<-mean(limit,per_limt)
limit_s<-summary(per_diff)
} else {
diff<-abs(predicted-var.use)
per_diff<-diff/predicted *100
limit<-90
limit_s<-summary(per_diff)
}
n<-length(temp)
for(i in analysis$ind){
if(n<=6){
if(i<4){
rng<-(i+1):(n)
} else rng<-c((i-2):(i-1),(n-1):(n))
}else{rng<-c((i-3):(i-1),(i+1):(i+3))}
temp[i]<-mean(temp[rng])
}
temp<-predict(loess(temp~indx))
outlier<-list()
outlier[1:length(dat[,1])]<-0
outlier[analysis$ind]<-1
tmp<-data.frame(dat[,1],predicted,var.use,temp +(temp*limit)/100 ,temp -(temp*limit)/100,temp +(temp*limit_s[5]*2)/100 ,temp -(temp*limit_s[5]*2)/100,unlist(outlier))
colnames(tmp)<-c("Date","Predicted","Actual","upperOffOutlierLimit","lowerOffOutlierLimit","upperSafe3rdQuantLimit","lowerSafe3rdQuantLimit","Sensitivity")
chk<-tmp[tmp$Sensitivity==1,]
if(nrow(chk)!=0){
for(i in nrow(chk)){
if(abs(chk$Actual[i]-chk$upperOffOutlierLimit[i]) <abs(chk$Actual[i]-chk$lowerOffOutlierLimit[i])){
if(!(chk$Actual[i]>chk$upperOffOutlierLimit[i]))
{
chk$upperOffOutlierLimit[i]<- chk$Actual[i]*0.30
}
if(!(chk$Actual[i]>chk$upperSafe3rdQuantLimit[i]))
{
chk$upperSafe3rdQuantLimit[i]<- chk$Actual[i]*0.30
}
}else{
if((chk$Actual[i]>chk$lowerOffOutlierLimit[i]))
{
chk$lowerOffOutlierLimit[i]<- chk$Actual[i]*1.2
}
if((chk$Actual[i]>chk$upperSafe3rdQuantLimit[i]))
{
chk$lowerSafe3rdQuantLimit[i]<- chk$Actual[i]*1.2
}
}
}
chk->tmp[tmp$Sensitivity==1,]}
###############################################
options(warn=0)
# if(plot_value==T){
#   plot_dia<-ggplot(tmp,aes(Date))+
#     geom_line(data = tmp,aes(Date,Predicted),size=2,col="steelblue")+
#     geom_point(data = tmp,aes(Date,Actual,col=Sensitivity))+
#     geom_ribbon(aes(ymin=lowerOffOutlierLimit,ymax=upperOffOutlierLimit),alpha=.25,fill="steelblue")+
#     labs(title='Outlier Detection')+
#     theme(axis.text= element_text(face = "bold",size = 7.5)     ,
#           axis.title.y =element_blank() ,
#           axis.title.x =element_blank() ,
#           plot.title = element_text(size =11, face = "bold") ,
#           plot.subtitle = element_text(size = 12),legend.position = "None"
#     )+
#     scale_color_manual(values=c("0" = "#333BFF", "outlier" = "#CC6600"))
#
#   return(plot_dia)
# } else return(tmp)
# json<-toJSON(tmp)
# json
tmp
}
with_libpaths(new = "/usr/lib/R/library/", install_github("kartikeyakirar/tsoutlier"))
json<-'[{"ga:users":"27.00"},{"ga:date":"2017-06-05 09:00:00","ga:users":"28.00"},{"ga:date":"2017-06-05 10:00:00","ga:users":"44.00"},{"ga:date":"2017-06-05 11:00:00","ga:users":"45.00"},{"ga:date":"2017-06-05 12:00:00","ga:users":"46.00"},{"ga:date":"2017-06-05 13:00:00","ga:users":"20.00"},{"ga:date":"2017-06-05 14:00:00","ga:users":"25.00"},{"ga:date":"2017-06-05 15:00:00","ga:users":"35.00"},{"ga:date":"2017-06-05 16:00:00","ga:users":"34.00"},{"ga:date":"2017-06-05 17:00:00","ga:users":"37.00"},{"ga:date":"2017-06-05 18:00:00","ga:users":"43.00"},{"ga:date":"2017-06-05 19:00:00","ga:users":"29.00"},{"ga:date":"2017-06-05 20:00:00","ga:users":"36.00"},{"ga:date":"2017-06-05 21:00:00","ga:users":"42.00"},{"ga:date":"2017-06-05 22:00:00","ga:users":"26.00"},{"ga:date":"2017-06-05 23:00:00","ga:users":"19.00"},{"ga:date":"2017-06-06 00:00:00","ga:users":"6.00"},{"ga:date":"2017-06-06 01:00:00","ga:users":"7.00"},{"ga:date":"2017-06-06 02:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 03:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 04:00:00","ga:users":"5.00"},{"ga:date":"2017-06-06 05:00:00","ga:users":"2.00"},{"ga:date":"2017-06-06 06:00:00","ga:users":"14.00"},{"ga:date":"2017-06-06 07:00:00","ga:users":"26.00"},{"ga:date":"2017-06-06 08:00:00","ga:users":"52.00"},{"ga:date":"2017-06-06 09:00:00","ga:users":"67.00"},{"ga:date":"2017-06-06 10:00:00","ga:users":"49.00"},{"ga:date":"2017-06-06 11:00:00","ga:users":"39.00"},{"ga:date":"2017-06-06 12:00:00","ga:users":"64.00"},{"ga:date":"2017-06-06 13:00:00","ga:users":"38.00"}]'
jsonlite::fromJSON(json)
kl<-jsonlite::fromJSON(json)
algorithm(kl)
library(tsoutlier)
tsoutlier::algorithm(kl)
kl
json
json<-'[{{"ga:date":"2017-06-05 09:00:00","ga:users":"28.00"},{"ga:date":"2017-06-05 10:00:00","ga:users":"44.00"},{"ga:date":"2017-06-05 11:00:00","ga:users":"45.00"},{"ga:date":"2017-06-05 12:00:00","ga:users":"46.00"},{"ga:date":"2017-06-05 13:00:00","ga:users":"20.00"},{"ga:date":"2017-06-05 14:00:00","ga:users":"25.00"},{"ga:date":"2017-06-05 15:00:00","ga:users":"35.00"},{"ga:date":"2017-06-05 16:00:00","ga:users":"34.00"},{"ga:date":"2017-06-05 17:00:00","ga:users":"37.00"},{"ga:date":"2017-06-05 18:00:00","ga:users":"43.00"},{"ga:date":"2017-06-05 19:00:00","ga:users":"29.00"},{"ga:date":"2017-06-05 20:00:00","ga:users":"36.00"},{"ga:date":"2017-06-05 21:00:00","ga:users":"42.00"},{"ga:date":"2017-06-05 22:00:00","ga:users":"26.00"},{"ga:date":"2017-06-05 23:00:00","ga:users":"19.00"},{"ga:date":"2017-06-06 00:00:00","ga:users":"6.00"},{"ga:date":"2017-06-06 01:00:00","ga:users":"7.00"},{"ga:date":"2017-06-06 02:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 03:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 04:00:00","ga:users":"5.00"},{"ga:date":"2017-06-06 05:00:00","ga:users":"2.00"},{"ga:date":"2017-06-06 06:00:00","ga:users":"14.00"},{"ga:date":"2017-06-06 07:00:00","ga:users":"26.00"},{"ga:date":"2017-06-06 08:00:00","ga:users":"52.00"},{"ga:date":"2017-06-06 09:00:00","ga:users":"67.00"},{"ga:date":"2017-06-06 10:00:00","ga:users":"49.00"},{"ga:date":"2017-06-06 11:00:00","ga:users":"39.00"},{"ga:date":"2017-06-06 12:00:00","ga:users":"64.00"},{"ga:date":"2017-06-06 13:00:00","ga:users":"38.00"}]'
kl<-jsonlite::fromJSON(json)
json<-'[{"ga:date":"2017-06-05 09:00:00","ga:users":"28.00"},{"ga:date":"2017-06-05 10:00:00","ga:users":"44.00"},{"ga:date":"2017-06-05 11:00:00","ga:users":"45.00"},{"ga:date":"2017-06-05 12:00:00","ga:users":"46.00"},{"ga:date":"2017-06-05 13:00:00","ga:users":"20.00"},{"ga:date":"2017-06-05 14:00:00","ga:users":"25.00"},{"ga:date":"2017-06-05 15:00:00","ga:users":"35.00"},{"ga:date":"2017-06-05 16:00:00","ga:users":"34.00"},{"ga:date":"2017-06-05 17:00:00","ga:users":"37.00"},{"ga:date":"2017-06-05 18:00:00","ga:users":"43.00"},{"ga:date":"2017-06-05 19:00:00","ga:users":"29.00"},{"ga:date":"2017-06-05 20:00:00","ga:users":"36.00"},{"ga:date":"2017-06-05 21:00:00","ga:users":"42.00"},{"ga:date":"2017-06-05 22:00:00","ga:users":"26.00"},{"ga:date":"2017-06-05 23:00:00","ga:users":"19.00"},{"ga:date":"2017-06-06 00:00:00","ga:users":"6.00"},{"ga:date":"2017-06-06 01:00:00","ga:users":"7.00"},{"ga:date":"2017-06-06 02:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 03:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 04:00:00","ga:users":"5.00"},{"ga:date":"2017-06-06 05:00:00","ga:users":"2.00"},{"ga:date":"2017-06-06 06:00:00","ga:users":"14.00"},{"ga:date":"2017-06-06 07:00:00","ga:users":"26.00"},{"ga:date":"2017-06-06 08:00:00","ga:users":"52.00"},{"ga:date":"2017-06-06 09:00:00","ga:users":"67.00"},{"ga:date":"2017-06-06 10:00:00","ga:users":"49.00"},{"ga:date":"2017-06-06 11:00:00","ga:users":"39.00"},{"ga:date":"2017-06-06 12:00:00","ga:users":"64.00"},{"ga:date":"2017-06-06 13:00:00","ga:users":"38.00"}]'
kl<-jsonlite::fromJSON(json)
kl
tsoutlier::algorithm(kl)
dat<-kl
nchar(dat[,1][1])>10
input<-kl
input
dat<-input
if(nchar(dat[,1][1])>10){
seq_len<-nrow(dat)
input[,1]<-seq(as.Date("2000/1/1"), by = "day", length.out = seq_len)
}else {
dat[,1]<-as.Date(as.character(dat[,1]), format='%Y-%m-%d')
dat<-dat[order(dat[,1]),]
}
dat
input
class(input$`ga:date`)
library(tsoutlier)
json<-'[{"ga:date":"2017-06-05 09:00:00","ga:users":"28.00"},{"ga:date":"2017-06-05 10:00:00","ga:users":"44.00"},{"ga:date":"2017-06-05 11:00:00","ga:users":"45.00"},{"ga:date":"2017-06-05 12:00:00","ga:users":"46.00"},{"ga:date":"2017-06-05 13:00:00","ga:users":"20.00"},{"ga:date":"2017-06-05 14:00:00","ga:users":"25.00"},{"ga:date":"2017-06-05 15:00:00","ga:users":"35.00"},{"ga:date":"2017-06-05 16:00:00","ga:users":"34.00"},{"ga:date":"2017-06-05 17:00:00","ga:users":"37.00"},{"ga:date":"2017-06-05 18:00:00","ga:users":"43.00"},{"ga:date":"2017-06-05 19:00:00","ga:users":"29.00"},{"ga:date":"2017-06-05 20:00:00","ga:users":"36.00"},{"ga:date":"2017-06-05 21:00:00","ga:users":"42.00"},{"ga:date":"2017-06-05 22:00:00","ga:users":"26.00"},{"ga:date":"2017-06-05 23:00:00","ga:users":"19.00"},{"ga:date":"2017-06-06 00:00:00","ga:users":"6.00"},{"ga:date":"2017-06-06 01:00:00","ga:users":"7.00"},{"ga:date":"2017-06-06 02:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 03:00:00","ga:users":"3.00"},{"ga:date":"2017-06-06 04:00:00","ga:users":"5.00"},{"ga:date":"2017-06-06 05:00:00","ga:users":"2.00"},{"ga:date":"2017-06-06 06:00:00","ga:users":"14.00"},{"ga:date":"2017-06-06 07:00:00","ga:users":"26.00"},{"ga:date":"2017-06-06 08:00:00","ga:users":"52.00"},{"ga:date":"2017-06-06 09:00:00","ga:users":"67.00"},{"ga:date":"2017-06-06 10:00:00","ga:users":"49.00"},{"ga:date":"2017-06-06 11:00:00","ga:users":"39.00"},{"ga:date":"2017-06-06 12:00:00","ga:users":"64.00"},{"ga:date":"2017-06-06 13:00:00","ga:users":"38.00"}]'
asd<-jsonlite::fromJSON(json)
tsoutlier::algorithm(asd)
json<-'[{"date":"2017-05-21","users":256},
{"date":"2017-05-24","users":15656.23},
{"date":"2017-05-22","users":1256},
{"date":"2017-05-23","users":1056.62},
{"date":"2017-05-26","users":166.87},
{"date":"2017-05-25","users":256.10}]'
asd<-jsonlite::fromJSON(json)
tsoutlier::algorithm(asd)
library(tsoutlier)
